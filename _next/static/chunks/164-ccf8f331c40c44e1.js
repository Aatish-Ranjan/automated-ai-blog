"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[164],{6164:function(e,s,t){t.d(s,{Z:function(){return x}});var a=t(5893),n=t(7294),l=t(1664),r=t.n(l),i=t(1163),c=t(1200);function d(){let{pendingChanges:e,deployAllChanges:s,undoAllChanges:t,isDeploying:n,isUndoing:l,clearPendingChanges:r}=(0,c.A)();if(0===e.length)return null;let i=e=>new Date(e).toLocaleTimeString(),d=e=>{switch(e){case"homepage":return"\uD83C\uDFE0";case"content":return"\uD83D\uDCDD";case"settings":return"⚙️";default:return"\uD83D\uDCC4"}};return(0,a.jsxs)("div",{className:"fixed bottom-4 right-4 bg-white rounded-lg shadow-xl border border-gray-200 p-4 max-w-sm z-50",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("h3",{className:"font-semibold text-gray-900 flex items-center",children:[(0,a.jsx)("span",{className:"w-3 h-3 bg-amber-400 rounded-full mr-2 animate-pulse"}),"Pending Changes"]}),(0,a.jsx)("span",{className:"bg-amber-100 text-amber-800 text-xs px-2 py-1 rounded-full",children:e.length})]}),(0,a.jsx)("div",{className:"space-y-2 mb-4 max-h-32 overflow-y-auto",children:e.map(e=>(0,a.jsxs)("div",{className:"flex items-start space-x-2 text-sm",children:[(0,a.jsx)("span",{className:"text-lg",children:d(e.type)}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-gray-900 truncate",children:e.description}),(0,a.jsx)("p",{className:"text-gray-500 text-xs",children:i(e.timestamp)})]})]},e.id))}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:s,disabled:n||l,className:"flex-1 bg-green-600 text-white px-3 py-2 rounded-lg hover:bg-green-700 disabled:opacity-50 text-sm flex items-center justify-center space-x-1",children:n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white"}),(0,a.jsx)("span",{children:"Deploying..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"\uD83D\uDE80"}),(0,a.jsx)("span",{children:"Deploy All"})]})}),(0,a.jsx)("button",{onClick:t,disabled:n||l,className:"flex-1 bg-orange-600 text-white px-3 py-2 rounded-lg hover:bg-orange-700 disabled:opacity-50 text-sm flex items-center justify-center space-x-1",title:"Undo all pending changes",children:l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white"}),(0,a.jsx)("span",{children:"Undoing..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"↩️"}),(0,a.jsx)("span",{children:"Undo All"})]})}),(0,a.jsx)("button",{onClick:r,disabled:n||l,className:"bg-gray-500 text-white px-3 py-2 rounded-lg hover:bg-gray-600 disabled:opacity-50 text-sm",title:"Clear pending changes (without undoing)",children:"\uD83D\uDDD1️"})]}),(0,a.jsxs)("div",{className:"mt-2 text-xs text-gray-500",children:["\uD83D\uDCA1 ",(0,a.jsx)("strong",{children:"Deploy:"})," Apply changes to live site | ",(0,a.jsx)("strong",{children:"Undo:"})," Restore original values | ",(0,a.jsx)("strong",{children:"Clear:"})," Remove from list"]})]})}let o=e=>{let{onLogin:s}=e,[t,l]=(0,n.useState)(""),[r,i]=(0,n.useState)(""),[c,d]=(0,n.useState)(!1),o=async e=>{e.preventDefault(),d(!0),i("");try{let e=await fetch("/api/admin/auth",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:t})}),a=await e.json();a.success?s():i(a.message)}catch(e){i("Authentication failed")}finally{d(!1)}};return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,a.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white font-bold text-lg",children:"AI"})})}),(0,a.jsx)("h2",{className:"mt-4 text-3xl font-bold text-gray-900",children:"Admin Portal"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"smartiyo.com management"})]}),(0,a.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:o,children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"password",className:"sr-only",children:"Password"}),(0,a.jsx)("input",{id:"password",name:"password",type:"password",required:!0,value:t,onChange:e=>l(e.target.value),className:"relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter admin password"})]}),r&&(0,a.jsx)("div",{className:"text-red-600 text-sm text-center",children:r}),(0,a.jsx)("button",{type:"submit",disabled:c,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:c?"Authenticating...":"Sign in"})]})]})})};var x=e=>{let{children:s,title:t="Admin Panel"}=e,l=(0,i.useRouter)(),[x,m]=(0,n.useState)(!1),[h,u]=(0,n.useState)(!0);(0,n.useEffect)(()=>{g()},[]);let g=async()=>{try{(await fetch("/api/admin/check-auth")).ok&&m(!0)}catch(e){console.error("Auth check failed:",e)}finally{u(!1)}},p=async()=>{await fetch("/api/admin/logout",{method:"POST"}),m(!1),l.push("/admin/login")};return h?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,a.jsx)("div",{className:"text-lg",children:"Loading..."})}):x?(0,a.jsx)(c.I,{children:(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50 flex",children:[(0,a.jsxs)("div",{className:"w-64 bg-white shadow-lg",children:[(0,a.jsx)("div",{className:"p-4 border-b",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white font-bold text-sm",children:"AI"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"font-bold text-gray-900",children:"Admin Portal"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"smartiyo.com"})]})]})}),(0,a.jsx)("nav",{className:"p-4",children:(0,a.jsx)("ul",{className:"space-y-2",children:[{name:"Dashboard",href:"/admin",icon:"\uD83D\uDCCA"},{name:"Content",href:"/admin/content",icon:"\uD83D\uDCDD"},{name:"AI Generator",href:"/admin/generator",icon:"\uD83E\uDD16"},{name:"Homepage",href:"/admin/homepage",icon:"\uD83C\uDFE0"},{name:"Media",href:"/admin/media",icon:"\uD83D\uDCF7"},{name:"Settings",href:"/admin/settings",icon:"⚙️"},{name:"Deployment",href:"/admin/deployment",icon:"\uD83D\uDE80"}].map(e=>(0,a.jsx)("li",{children:(0,a.jsxs)(r(),{href:e.href,className:"flex items-center space-x-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors ".concat(l.pathname===e.href?"bg-blue-50 text-blue-700":"text-gray-700 hover:bg-gray-50"),children:[(0,a.jsx)("span",{children:e.icon}),(0,a.jsx)("span",{children:e.name})]})},e.name))})}),(0,a.jsx)("div",{className:"absolute bottom-4 left-4 right-4",children:(0,a.jsxs)("button",{onClick:p,className:"w-full flex items-center space-x-2 px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-lg",children:[(0,a.jsx)("span",{children:"\uD83D\uDEAA"}),(0,a.jsx)("span",{children:"Logout"})]})})]}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,a.jsx)("header",{className:"bg-white shadow-sm border-b px-6 py-4",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:t}),(0,a.jsx)("div",{className:"flex items-center space-x-4",children:(0,a.jsx)("a",{href:"https://smartiyo.com",target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:text-blue-700",children:"\uD83C\uDF10 View Live Site"})})]})}),(0,a.jsx)("main",{className:"flex-1 p-6",children:s})]}),(0,a.jsx)(d,{})]})}):(0,a.jsx)(o,{onLogin:()=>m(!0)})}}}]);