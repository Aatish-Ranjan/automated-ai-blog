(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[888],{3454:function(e,t,n){"use strict";var r,o;e.exports=(null==(r=n.g.process)?void 0:r.env)&&"object"==typeof(null==(o=n.g.process)?void 0:o.env)?n.g.process:n(7663)},6840:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return n(5545)}])},1200:function(e,t,n){"use strict";n.d(t,{A:function(){return s},I:function(){return i}});var r=n(5893),o=n(7294);let a=(0,o.createContext)(void 0);function i(e){let{children:t}=e,[n,i]=(0,o.useState)([]),[s,c]=(0,o.useState)(!1),[u,l]=(0,o.useState)(!1),f=()=>{i([])},p=async()=>{if(0===n.length)return alert("No pending changes to undo"),!1;l(!0);try{for(let e of n)e.originalData&&await d(e);return f(),alert("✅ All changes have been undone successfully!"),!0}catch(e){return console.error("Undo error:",e),alert("❌ Failed to undo changes. Please try again."),!1}finally{l(!1)}},d=async e=>{switch(e.type){case"homepage":await fetch("/api/admin/homepage/config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e.originalData)});break;case"settings":await fetch("/api/admin/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e.originalData)});break;case"post":await fetch("/api/admin/posts",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e.originalData,skipDeploy:!0})})}},h=async()=>{if(0===n.length)return alert("No pending changes to deploy"),!1;c(!0);try{for(let e of n)await g(e);if(!(await fetch("/api/admin/deploy/batch",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({changes:n})})).ok)throw Error("Deployment failed");return f(),alert("\uD83D\uDE80 All changes deployed successfully!"),!0}catch(e){return console.error("Deployment error:",e),alert("❌ Deployment failed. Please try again."),!1}finally{c(!1)}},g=async e=>{switch(e.type){case"homepage":await fetch("/api/admin/homepage/config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e.data)});break;case"settings":await fetch("/api/admin/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e.data)});break;case"post":await fetch("/api/admin/posts",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e.data,skipDeploy:!0})})}};return(0,r.jsx)(a.Provider,{value:{pendingChanges:n,addPendingChange:e=>{let t={...e,id:Date.now().toString()+Math.random().toString(36).substr(2,9),timestamp:Date.now()};i(n=>[...n.filter(t=>t.type!==e.type),t])},removePendingChange:e=>{i(t=>t.filter(t=>t.id!==e))},clearPendingChanges:f,undoAllChanges:p,deployAllChanges:h,isDeploying:s,isUndoing:u},children:t})}function s(){let e=(0,o.useContext)(a);if(void 0===e)throw Error("useAdmin must be used within an AdminProvider");return e}},5545:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l},event:function(){return u},pageview:function(){return c}});var r=n(5893);n(876);var o=n(7294),a=n(1163),i=n(1200);let s=n(3454).env.NEXT_PUBLIC_GA_ID,c=e=>{window.gtag&&window.gtag("config",s,{page_path:e})},u=e=>{let{action:t,category:n,label:r,value:o}=e;window.gtag&&window.gtag("event",t,{event_category:n,event_label:r,value:o})};function l(e){let{Component:t,pageProps:n}=e,u=(0,a.useRouter)(),l=u.pathname.startsWith("/admin");(0,o.useEffect)(()=>{let e=e=>{c(e)};return u.events.on("routeChangeComplete",e),()=>{u.events.off("routeChangeComplete",e)}},[u.events]);let f=(0,r.jsxs)(r.Fragment,{children:[s&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("script",{async:!0,src:"https://www.googletagmanager.com/gtag/js?id=".concat(s)}),(0,r.jsx)("script",{dangerouslySetInnerHTML:{__html:"\n                window.dataLayer = window.dataLayer || [];\n                function gtag(){dataLayer.push(arguments);}\n                gtag('js', new Date());\n                gtag('config', '".concat(s,"', {\n                  page_path: window.location.pathname,\n                });\n              ")}})]}),(0,r.jsx)(t,{...n})]});return l?(0,r.jsx)(i.I,{children:f}):f}},876:function(){},7663:function(e){!function(){var t={229:function(e){var t,n,r,o=e.exports={};function a(){throw Error("setTimeout has not been defined")}function i(){throw Error("clearTimeout has not been defined")}function s(e){if(t===setTimeout)return setTimeout(e,0);if((t===a||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:a}catch(e){t=a}try{n="function"==typeof clearTimeout?clearTimeout:i}catch(e){n=i}}();var c=[],u=!1,l=-1;function f(){u&&r&&(u=!1,r.length?c=r.concat(c):l=-1,c.length&&p())}function p(){if(!u){var e=s(f);u=!0;for(var t=c.length;t;){for(r=c,c=[];++l<t;)r&&r[l].run();l=-1,t=c.length}r=null,u=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function h(){}o.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new d(e,t)),1!==c.length||u||s(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=h,o.addListener=h,o.once=h,o.off=h,o.removeListener=h,o.removeAllListeners=h,o.emit=h,o.prependListener=h,o.prependOnceListener=h,o.listeners=function(e){return[]},o.binding=function(e){throw Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw Error("process.chdir is not supported")},o.umask=function(){return 0}}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var a=n[e]={exports:{}},i=!0;try{t[e](a,a.exports,r),i=!1}finally{i&&delete n[e]}return a.exports}r.ab="//";var o=r(229);e.exports=o}()},1163:function(e,t,n){e.exports=n(3079)}},function(e){var t=function(t){return e(e.s=t)};e.O(0,[774,179],function(){return t(6840),t(3079)}),_N_E=e.O()}]);