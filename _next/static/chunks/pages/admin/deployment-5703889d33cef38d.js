(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[171],{8550:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/deployment",function(){return t(1078)}])},1078:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return r}});var a=t(5893),l=t(7294),n=t(6164);function r(){let[e,s]=(0,l.useState)({lastDeploy:null,deploymentUrl:"https://smartiyo.com",gitStatus:{branch:"main",lastCommit:"",uncommittedChanges:!1},vercelStatus:{status:"unknown",lastBuild:null}}),[t,r]=(0,l.useState)([]),[i,c]=(0,l.useState)(!1),[d,o]=(0,l.useState)([]);(0,l.useEffect)(()=>{m(),x();let e=setInterval(m,3e4);return()=>clearInterval(e)},[]);let m=async()=>{try{let e=await fetch("/api/admin/deployment/status");if(e.ok){let t=await e.json();s(t)}}catch(e){console.error("Failed to load deployment status:",e)}},x=async()=>{try{let e=await fetch("/api/admin/deployment/git-logs");if(e.ok){let s=await e.json();r(s.logs||[])}}catch(e){console.error("Failed to load git logs:",e)}},u=async()=>{c(!0),o(["\uD83D\uDE80 Starting manual deployment..."]);try{var e;let s=await fetch("/api/admin/deployment/trigger",{method:"POST"}),t=null===(e=s.body)||void 0===e?void 0:e.getReader();if(t)for(;;){let{done:e,value:s}=await t.read();if(e)break;new TextDecoder().decode(s).split("\n").filter(e=>e.trim()).forEach(e=>{e.trim()&&o(s=>[...s,e.trim()])})}o(e=>[...e,"✅ Deployment completed!"]),m(),x()}catch(e){o(e=>[...e,"❌ Deployment failed"])}finally{c(!1)}},h=async()=>{try{let e=prompt("Enter commit message:")||"Admin portal update";(await fetch("/api/admin/deployment/commit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e})})).ok?(alert("✅ Changes committed and pushed successfully!"),m(),x()):alert("❌ Failed to commit changes")}catch(e){alert("❌ Error committing changes")}};return(0,a.jsx)(n.Z,{title:"Deployment",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"\uD83D\uDE80 Deployment & Git"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Monitor and manage your blog deployment"})]}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsx)("a",{href:e.deploymentUrl,target:"_blank",rel:"noopener noreferrer",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"\uD83C\uDF10 View Live Site"}),(0,a.jsx)("button",{onClick:u,disabled:i,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 disabled:opacity-50",children:i?"\uD83D\uDD04 Deploying...":"\uD83D\uDE80 Deploy Now"})]})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"\uD83D\uDCCA Deployment Status"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("span",{className:"text-lg",children:"\uD83C\uDF10"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"Live Site"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.deploymentUrl})]})]}),(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat((e=>{switch(e.toLowerCase()){case"ready":case"success":return"text-green-600 bg-green-50";case"building":case"queued":return"text-yellow-600 bg-yellow-50";case"error":case"failed":return"text-red-600 bg-red-50";default:return"text-gray-600 bg-gray-50"}})(e.vercelStatus.status)),children:e.vercelStatus.status||"Unknown"})]}),(0,a.jsx)("div",{className:"flex items-center justify-between p-3 bg-purple-50 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("span",{className:"text-lg",children:"\uD83D\uDD04"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"Last Build"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.vercelStatus.lastBuild||"No recent builds"})]})]})}),(0,a.jsx)("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("span",{className:"text-lg",children:"\uD83D\uDCC5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"Last Deploy"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.lastDeploy||"No recent deployments"})]})]})})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"\uD83D\uDCCB Git Status"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("span",{className:"text-lg",children:"\uD83C\uDF3F"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"Current Branch"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.gitStatus.branch})]})]})}),(0,a.jsx)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("span",{className:"text-lg",children:"\uD83D\uDCDD"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"Last Commit"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 font-mono",children:e.gitStatus.lastCommit||"No commits found"})]})]})}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("span",{className:"text-lg",children:"\uD83D\uDD04"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:"Working Directory"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.gitStatus.uncommittedChanges?"Has uncommitted changes":"Clean"})]})]}),e.gitStatus.uncommittedChanges&&(0,a.jsx)("button",{onClick:h,className:"bg-orange-600 text-white text-xs px-3 py-1 rounded hover:bg-orange-700",children:"\uD83D\uDCE4 Commit & Push"})]})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"\uD83D\uDCDC Recent Commits"}),(0,a.jsx)("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:t.map((e,s)=>(0,a.jsxs)("div",{className:"border-l-4 border-blue-200 pl-4 py-2 bg-gray-50 rounded-r-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:e.message}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:e.date})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600 mt-1",children:[(0,a.jsxs)("span",{children:["\uD83D\uDC64 ",e.author]}),(0,a.jsx)("span",{className:"font-mono text-xs",children:e.hash})]})]},s))}),0===t.length&&(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)("span",{className:"text-4xl mb-4 block",children:"\uD83D\uDCCB"}),(0,a.jsx)("p",{children:"No git history found"})]})]}),d.length>0&&(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"\uD83D\uDCCB Deployment Logs"}),(0,a.jsx)("div",{className:"bg-gray-900 text-green-400 p-4 rounded-lg font-mono text-sm max-h-64 overflow-y-auto",children:d.map((e,s)=>(0,a.jsx)("div",{className:"mb-1",children:e},s))})]}),(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-blue-900 mb-2",children:"⚡ Quick Actions"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("button",{onClick:()=>window.open("https://github.com/Aatish-Ranjan/automated-ai-blog","_blank"),className:"flex items-center space-x-2 p-3 bg-white rounded-lg border hover:bg-gray-50",children:[(0,a.jsx)("span",{children:"\uD83D\uDCE6"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"View Repository"})]}),(0,a.jsxs)("button",{onClick:()=>window.open("https://vercel.com/dashboard","_blank"),className:"flex items-center space-x-2 p-3 bg-white rounded-lg border hover:bg-gray-50",children:[(0,a.jsx)("span",{children:"⚡"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Vercel Dashboard"})]}),(0,a.jsxs)("button",{onClick:m,className:"flex items-center space-x-2 p-3 bg-white rounded-lg border hover:bg-gray-50",children:[(0,a.jsx)("span",{children:"\uD83D\uDD04"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Refresh Status"})]})]})]})]})})}}},function(e){e.O(0,[664,164,888,774,179],function(){return e(e.s=8550)}),_N_E=e.O()}]);