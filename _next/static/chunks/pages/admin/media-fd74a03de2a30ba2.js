(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[299],{1140:function(e,a,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/media",function(){return s(4188)}])},4188:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return i}});var t=s(5893),l=s(7294),r=s(6164);function i(){let[e,a]=(0,l.useState)("local"),[s,i]=(0,l.useState)([]),[d,n]=(0,l.useState)([]),[o,c]=(0,l.useState)(""),[x,m]=(0,l.useState)(!1),[u,g]=(0,l.useState)(null);(0,l.useEffect)(()=>{h()},[]);let h=async()=>{try{let e=await fetch("/api/admin/media/mongodb");if(e.ok){let a=(await e.json()).images.map(e=>({name:e.filename,path:e.url,size:e.size,lastModified:e.downloadedAt,url:e.url,source:e.source,tags:e.tags,contentType:e.contentType}));i(a)}}catch(e){console.error("Failed to load images from database:",e)}},p=async e=>{if(e.trim()){m(!0);try{let a=await fetch("/api/admin/media/pixabay-search?q=".concat(encodeURIComponent(e)));if(a.ok){let e=await a.json();n(e.hits||[])}}catch(e){console.error("Failed to search Pixabay:",e)}finally{m(!1)}}},b=async e=>{try{let a=await fetch("/api/admin/media/download-pixabay",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageUrl:e.largeImageURL,filename:"pixabay-".concat(e.id,".jpg"),tags:e.tags.split(",").map(e=>e.trim()),pixabayId:e.id.toString()})});a.ok?(await a.json(),alert("✅ Image downloaded and saved to database successfully!"),h()):alert("❌ Failed to download image")}catch(e){alert("❌ Error downloading image")}},y=async e=>{if(confirm("Are you sure you want to delete ".concat(e,"?")))try{(await fetch("/api/admin/media/mongodb",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({filename:e})})).ok?(h(),alert("✅ Image deleted successfully")):alert("❌ Failed to delete image")}catch(e){alert("❌ Error deleting image")}},f=async e=>{let a=e.target.files;if(!a||0===a.length)return;let s=a[0],t=new FormData;t.append("file",s),g(0);try{let e=await fetch("/api/admin/media/upload",{method:"POST",body:t});e.ok?(await e.json(),alert("✅ File uploaded successfully!"),h()):alert("❌ Failed to upload file")}catch(e){alert("❌ Error uploading file")}finally{g(null)}},j=e=>{if(0===e)return"0 B";let a=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,a)).toFixed(2))+" "+["B","KB","MB","GB"][a]};return(0,t.jsx)(r.Z,{title:"Media Management",children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"\uD83D\uDCF8 Media Management"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Manage your blog images and media files"})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,t.jsx)("div",{className:"border-b border-gray-200",children:(0,t.jsxs)("nav",{className:"-mb-px flex",children:[(0,t.jsxs)("button",{onClick:()=>a("local"),className:"py-4 px-6 border-b-2 font-medium text-sm ".concat("local"===e?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:["\uD83D\uDCC1 Local Files (",s.length,")"]}),(0,t.jsx)("button",{onClick:()=>a("pixabay"),className:"py-4 px-6 border-b-2 font-medium text-sm ".concat("pixabay"===e?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"\uD83D\uDD0D Pixabay Search"})]})}),(0,t.jsxs)("div",{className:"p-6",children:["local"===e&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{className:"text-gray-600",children:(0,t.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48",children:(0,t.jsx)("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"file-upload",className:"cursor-pointer",children:[(0,t.jsx)("span",{className:"mt-2 block text-sm font-medium text-gray-900",children:"Upload new image"}),(0,t.jsx)("span",{className:"mt-1 block text-sm text-gray-600",children:"or drag and drop files here"})]}),(0,t.jsx)("input",{id:"file-upload",type:"file",accept:"image/*",onChange:f,className:"hidden"})]}),null!==u&&(0,t.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,t.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(u,"%")}})})]})}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:s.map((e,a)=>(0,t.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 border",children:[(0,t.jsx)("div",{className:"aspect-square bg-gray-200 rounded-lg mb-3 overflow-hidden",children:(0,t.jsx)("img",{src:e.url,alt:e.name,className:"w-full h-full object-cover",onError:e=>{e.target.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><text y="12" x="12" text-anchor="middle" font-size="10">\uD83D\uDCC4</text></svg>'}})}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h4",{className:"font-medium text-sm text-gray-900 truncate",children:e.name}),(0,t.jsx)("p",{className:"text-xs text-gray-600",children:j(e.size)}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:e.lastModified}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)("button",{onClick:()=>navigator.clipboard.writeText(e.url),className:"flex-1 bg-blue-600 text-white text-xs py-2 px-3 rounded hover:bg-blue-700",children:"\uD83D\uDCCB Copy URL"}),(0,t.jsx)("button",{onClick:()=>y(e.name),className:"bg-red-600 text-white text-xs py-2 px-3 rounded hover:bg-red-700",children:"\uD83D\uDDD1️"})]})]})]},a))}),0===s.length&&(0,t.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,t.jsx)("span",{className:"text-4xl mb-4 block",children:"\uD83D\uDCED"}),(0,t.jsx)("p",{children:"No local files found. Upload some images to get started!"})]})]}),"pixabay"===e&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex space-x-4",children:[(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsx)("input",{type:"text",value:o,onChange:e=>c(e.target.value),onKeyPress:e=>"Enter"===e.key&&p(o),placeholder:"Search for images... (e.g. 'technology', 'business', 'nature')",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})}),(0,t.jsx)("button",{onClick:()=>p(o),disabled:x,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50",children:x?"\uD83D\uDD0D Searching...":"\uD83D\uDD0D Search"})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:d.map(e=>(0,t.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 border",children:[(0,t.jsx)("div",{className:"aspect-square bg-gray-200 rounded-lg mb-3 overflow-hidden",children:(0,t.jsx)("img",{src:e.webformatURL,alt:e.tags,className:"w-full h-full object-cover"})}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h4",{className:"font-medium text-sm text-gray-900 truncate",children:e.tags}),(0,t.jsxs)("p",{className:"text-xs text-gray-600",children:["By ",e.user]}),(0,t.jsxs)("div",{className:"flex justify-between text-xs text-gray-500",children:[(0,t.jsxs)("span",{children:["❤️ ",e.likes]}),(0,t.jsxs)("span",{children:["⬇️ ",e.downloads]})]}),(0,t.jsx)("button",{onClick:()=>b(e),className:"w-full bg-green-600 text-white text-xs py-2 px-3 rounded hover:bg-green-700",children:"⬇️ Download"})]})]},e.id))}),0===d.length&&o&&!x&&(0,t.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,t.jsx)("span",{className:"text-4xl mb-4 block",children:"\uD83D\uDD0D"}),(0,t.jsxs)("p",{children:['No images found for "',o,'". Try different keywords!']})]}),0===d.length&&!o&&(0,t.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,t.jsx)("span",{className:"text-4xl mb-4 block",children:"\uD83D\uDCF8"}),(0,t.jsx)("p",{children:"Search Pixabay for high-quality stock images for your blog posts"})]})]})]})]}),(0,t.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-blue-900 mb-2",children:"\uD83D\uDCA1 How to Use"}),(0,t.jsxs)("ul",{className:"text-blue-800 text-sm space-y-1",children:[(0,t.jsxs)("li",{children:["• ",(0,t.jsx)("strong",{children:"Local Files:"})," Upload images directly or manage existing files"]}),(0,t.jsxs)("li",{children:["• ",(0,t.jsx)("strong",{children:"Pixabay Search:"})," Find and download stock images with your existing API key"]}),(0,t.jsxs)("li",{children:["• ",(0,t.jsx)("strong",{children:"Copy URL:"})," Use the copy button to get image URLs for your posts"]}),(0,t.jsxs)("li",{children:["• ",(0,t.jsx)("strong",{children:"Auto-Integration:"})," Downloaded images work with your AI generation script"]})]})]})]})})}}},function(e){e.O(0,[664,164,888,774,179],function(){return e(e.s=1140)}),_N_E=e.O()}]);